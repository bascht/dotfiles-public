#!/bin/bash

if [ -z "$WAYLAND_DISPLAY" ]; then
    i3-inputconfig &
    i3-displayconfig &

    numlockx on &
    killall volumeicon; volumeicon &
    killall tdrop
    nm-applet &
    killall greenclip; greenclip daemon &
    dunst &
    #killall compton; compton --config ~/.config/i3/compton.conf &
    xsetroot -cursor_name left_ptr &
    xautolock -time 6 -locker "i3-blur-lock --dpms" &
    killall redshift; redshift -l 48.15:11.64 -t 6500K:3000K &
    emacs ~/ &
    firefox &
    vivaldi-stable &
    nextcloud &
else
    swaymsg exec volumeicon
    swaymsg exec nm-applet
    swaymsg exec nextcloud
    swaymsg exec qrmako

    killall redshift; swaymsg exec "redshift -m wayland -l 48.15:11.64 -t 6500K:3000K"

    swaymsg workspace "4: Docs"
    swaymsg exec "emacs ~/"
    swaymsg workspace "2: Web"
    swaymsg exec firefox-wayland
    swaymsg workspace "3: Comms"
    swaymsg exec vivaldi-stable
    swaymsg workspace "1: Code"

    swaymsg -- exec swayidle \
         timeout 300 'swaylock -c 000000' \
         timeout 600 'swaymsg "output * dpms off"' \
         resume 'swaymsg "output * dpms on"' \
         before-sleep 'swaylock -c 000000'
fi;
