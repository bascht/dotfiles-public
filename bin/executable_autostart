#!/bin/bash

dbus-update-activation-environment --systemd DBUS_SESSION_BUS_ADDRESS DISPLAY XAUTHORITY > /dev/null
swaymsg exec -- /usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets
dbus-update-activation-environment --systemd --all

swaymsg exec nextcloud
swaymsg exec mako
swaymsg exec -- systemctl restart --user mopidy.service
swaymsg exec -- systemctl restart --user emacs.service
swaymsg exec -- wl-paste -t text --watch clipman store --histpath="~/.local/share/clipman-primary.json"

swaymsg exec -- gammastep -m wayland -l 48.15:11.64 -t 6500K:3000K

swaymsg workspace "4 "
swaymsg exec "emacs ~/"
sleep 0.5
swaymsg workspace "2 "
swaymsg exec "firefox"
sleep 2
swaymsg workspace "5 "
swaymsg exec alacritty -- -e "tmuxinator start music"
sleep 0.3
swaymsg workspace "1 "
swaymsg exec alacritty
sleep 0.3
swaymsg workspace "3 "
swaymsg layout tabbed
swaymsg exec start-comms

swayidle \
    timeout 300 'blur-lock' \
    timeout 600 'swaymsg "output * dpms off"' \
    resume 'swaymsg "output * dpms on"' \
    before-sleep 'blur-lock' &
