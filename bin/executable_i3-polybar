#!/bin/bash

killall -9 polybar

if [[ $DESKTOP_SESSION == "i3" ]]; then
    WINDOW_MODULE="internal/i3"
    WS_LABEL="%name%"
else
    WINDOW_MODULE="internal/bspwm"
    WS_LABEL="%icon%"
fi;
export WINDOW_MODULE
export WS_LABEL

# Check if we're docked in
export BAR_PA_SINK=$(pactl info |grep -oP "^Default Sink: \K.*")
if xrandr |grep "HDMI2 connected" > /dev/null; then
    export MONITOR=HDMI2
else
    export MONITOR=eDP1
fi;


if xrandr | grep "^DP-2-3 connected" > /dev/null; then
    export BAR_ETH_INTERFACE=enp0s31f6
    export BAR_MODULES="mpd volume memory eth wlan temperature date"
    unset MONITOR
    MONITOR=DP-2-2 polybar bascht &
    MONITOR=DP-2-3 polybar secondary &
elif xrandr | grep "^DP-2-2-8 connected" > /dev/null; then
    export BAR_MODULES="mpd volume memory wlan temperature date"
    unset MONITOR
    MONITOR=DP-2-2-8 polybar bascht &
else
    MONITOR=eDP-1 polybar bascht &
fi;


